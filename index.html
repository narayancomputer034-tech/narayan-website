<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Narayan Computer Services</title>
    <style>
        :root { --primary: #2874f0; --secondary: #fb641b; --bg: #f1f3f6; }
        body { font-family: Arial, sans-serif; background-color: var(--bg); margin: 0; padding-bottom: 70px; }
        header { background: var(--primary); padding: 10px 15px; position: sticky; top: 0; z-index: 100; color: white; display: flex; justify-content: space-between; align-items: center; }
        .search-bar { background: white; padding: 8px; border-radius: 4px; margin: 10px; display: flex; }
        .search-bar input { border: none; width: 100%; outline: none; }
        .product-card { background: white; margin: 10px; padding: 10px; display: flex; gap: 15px; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .product-card img { width: 100px; height: 100px; object-fit: contain; }
        .price { font-weight: bold; font-size: 18px; }
        .mrp { text-decoration: line-through; color: #878787; font-size: 14px; }
        .btn { background: var(--secondary); color: white; border: none; padding: 8px 15px; border-radius: 2px; cursor: pointer; }
        .nav-bottom { position: fixed; bottom: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 10px 0; border-top: 1px solid #ddd; }
        #cart-page, #admin-page { display: none; padding: 15px; background: white; min-height: 100vh; }
    </style>
</head>
<body>

<header>
    <div class="logo">Narayan Computer</div>
    <div onclick="openPage('cart')">üõí Cart (<span id="cart-count">0</span>)</div>
</header>

<div id="home-page">
    <div class="search-bar"><input type="text" placeholder="Search products..."></div>
    <div id="product-list"></div>
</div>

<div id="cart-page">
    <h2>Your Cart</h2>
    <div id="cart-items"></div>
    <hr>
    <h3>Checkout</h3>
    <input type="text" id="chk-name" placeholder="Full Name" style="width:90%; padding:10px; margin:5px;"><br>
    <input type="text" id="chk-addr" placeholder="Full Address" style="width:90%; padding:10px; margin:5px;"><br>
    <select id="pay" style="width:95%; padding:10px; margin:5px;">
        <option value="Cash on Delivery">Cash on Delivery</option>
        <option value="UPI / Online">UPI / Online</option>
    </select><br><br>
    <button class="btn" onclick="checkout()" style="width:100%">Place Order on WhatsApp</button>
    <button onclick="openPage('home')">Back to Shop</button>
</div>

<script>
    // --- DATA & PRODUCTS ---
    const defaults = [
        { id:201, name:"Mantra MFS110 Biometric", cat:"Electronics", price:2499, mrp:4500, img:"nn.jpeg" },
        { id:202, name:"Canon Pixma Photo Printer", cat:"Printer", price:12999, mrp:16000, img:"canon1.jpg.jpeg" },
        { id:1, name:"Apple iPhone 14", cat:"Mobile", price:56999, mrp:69900, img:"https://m.media-amazon.com/images/I/61bK6PM73YL._AC_UY327_FMwebp_QL65_.jpg" }
    ];

    let cart = JSON.parse(localStorage.getItem('my_cart_v2')) || [];
    
    function render(data) {
        let h = '';
        data.forEach(p => {
            h += `
            <div class="product-card">
                <img src="${p.img}" onerror="this.src='https://via.placeholder.com/100'">
                <div>
                    <div style="font-size:16px">${p.name}</div>
                    <div class="price">‚Çπ${p.price} <span class="mrp">‚Çπ${p.mrp}</span></div>
                    <button class="btn" onclick="addToCart(${p.id})">Add to Cart</button>
                </div>
            </div>`;
        });
        document.getElementById('product-list').innerHTML = h;
        document.getElementById('cart-count').innerText = cart.length;
    }

    function addToCart(id) {
        let p = defaults.find(x => x.id == id);
        cart.push(p);
        localStorage.setItem('my_cart_v2', JSON.stringify(cart));
        document.getElementById('cart-count').innerText = cart.length;
        alert("Added to cart!");
    }

    function openPage(page) {
        document.getElementById('home-page').style.display = (page=='home'?'block':'none');
        document.getElementById('cart-page').style.display = (page=='cart'?'block':'none');
        if(page=='cart') renderCart();
    }

    function renderCart() {
        let h = '';
        let total = 0;
        cart.forEach((item, index) => {
            total += item.price;
            h += `<p>${item.name} - ‚Çπ${item.price} <button onclick="removeItem(${index})">‚ùå</button></p>`;
        });
        h += `<h3>Total: ‚Çπ${total}</h3>`;
        document.getElementById('cart-items').innerHTML = h || 'Cart is Empty';
    }

    function removeItem(index) {
        cart.splice(index, 1);
        localStorage.setItem('my_cart_v2', JSON.stringify(cart));
        renderCart();
        document.getElementById('cart-count').innerText = cart.length;
    }

    function checkout() {
        let name = document.getElementById('chk-name').value;
        let addr = document.getElementById('chk-addr').value;
        let pay = document.getElementById('pay').value;

        if(!name || !addr) return alert("Please enter Name and Address");
        if(cart.length===0) return alert("Cart is empty");

        let items = cart.map(i=> i.name + " (‚Çπ" + i.price + ")").join(", ");
        let total = cart.reduce((a,b)=>a+b.price, 0);

        let phone = "919708797335"; 
        let msg = `*New Order from Website*%0A%0A*Name:* ${name}%0A*Address:* ${addr}%0A*Payment:* ${pay}%0A*Items:* ${items}%0A*Total:* ‚Çπ${total}`;
        
        window.open("https://wa.me/" + phone + "?text=" + msg, '_blank');
        
        cart = [];
        localStorage.setItem('my_cart_v2', JSON.stringify(cart));
        location.reload();
    }

    render(defaults);
</script>

</body>
</html>
