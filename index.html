<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Narayan Plus - Professional Store</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- ORIGINAL PROFESSIONAL THEME --- */
        :root {
            --primary: #2874f0; /* Flipkart Blue */
            --dark-blue: #172337;
            --secondary: #fb641b; /* Orange */
            --bg: #f1f3f6;
            --white: #ffffff;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Roboto, Arial, sans-serif; }
        body { background-color: var(--bg); padding-bottom: 60px; -webkit-tap-highlight-color: transparent; }

        /* --- LOGIN OVERLAY (ONE TIME) --- */
        #login-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .login-card { width: 100%; max-width: 350px; text-align: center; }
        .inp-field { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 4px; margin: 10px 0; font-size: 16px; outline: none; }
        .btn-full { width: 100%; padding: 14px; background: var(--secondary); color: white; border: none; font-weight: bold; font-size: 16px; border-radius: 2px; cursor: pointer; margin-top: 10px; }
        
        /* --- HEADER --- */
        header { background: var(--primary); padding: 12px 15px; position: sticky; top: 0; z-index: 1000; display: flex; align-items: center; gap: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .logo { color: white; font-size: 19px; font-weight: bold; font-style: italic; flex-grow: 1; }
        .cart-icon { position: relative; color: white; font-size: 22px; cursor: pointer; }
        .badge { position: absolute; top: -6px; right: -8px; background: #ff6161; color: white; font-size: 11px; padding: 2px 5px; border-radius: 10px; border: 1px solid white; }

        /* --- SLIDER & SEARCH --- */
        .search-area { background: white; padding: 8px; margin: 8px; border-radius: 2px; display: flex; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
        .search-area input { border: none; flex: 1; outline: none; margin-left: 10px; font-size: 14px; }
        .slider { width: 100%; height: 170px; overflow: hidden; position: relative; background: #ddd; }
        .slides-container { display: flex; transition: transform 0.5s ease-in-out; height: 100%; }
        .slide { min-width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: bold; color: white; background-size: cover; background-position: center; }

        /* --- GRID & CARDS --- */
        .cat-row { display: flex; overflow-x: auto; padding: 10px; background: white; gap: 15px; scrollbar-width: none; margin-bottom: 5px; }
        .cat-box { min-width: 70px; text-align: center; cursor: pointer; }
        .cat-circle { width: 55px; height: 55px; background: #e0f7fa; border-radius: 50%; margin: 0 auto 5px; display: flex; align-items: center; justify-content: center; font-size: 22px; color: var(--primary); border: 2px solid transparent; }
        .cat-box.active .cat-circle { border-color: var(--secondary); background: white; }

        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 4px; padding: 4px; }
        .card { background: white; padding: 10px; position: relative; display: flex; flex-direction: column; justify-content: space-between; height: 100%; }
        .card img { width: 100%; height: 140px; object-fit: contain; margin-bottom: 10px; }
        .p-title { font-size: 13px; color: #333; height: 38px; overflow: hidden; margin-bottom: 5px; }
        .p-price { font-size: 16px; font-weight: 600; color: #212121; }
        .btn-add { width: 100%; padding: 8px; border: 1px solid #ddd; background: white; color: var(--primary); font-weight: bold; margin-top: 8px; border-radius: 2px; cursor: pointer; }

        /* --- FOOTER & ADMIN BUTTON --- */
        .footer { background: var(--dark-blue); color: white; padding: 20px 15px; margin-top: 20px; font-size: 13px; line-height: 2; padding-bottom: 80px; }
        .seller-btn { display: inline-block; background: var(--secondary); color: white; padding: 10px 20px; text-decoration: none; font-weight: bold; border-radius: 3px; margin-top: 10px; width: 100%; text-align: center; }
        
        /* SECRET ADMIN BUTTON */
        .admin-lock-btn { position: fixed; bottom: 80px; left: 20px; background: #333; color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; cursor: pointer; z-index: 2000; box-shadow: 0 4px 10px rgba(0,0,0,0.3); border: 2px solid white; }

        /* --- PAGES --- */
        .page { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #f2f2f2; z-index: 2000; overflow-y: auto; display: none; padding-bottom: 60px; }
        .page.active { display: block; animation: slideIn 0.3s; }
        @keyframes slideIn { from{transform:translateX(100%)} to{transform:translateX(0)} }
        .page-header { background: white; padding: 15px; display: flex; align-items: center; border-bottom: 1px solid #ddd; font-weight: bold; font-size: 16px; position: sticky; top: 0; z-index: 10; }

        /* --- ADMIN PANEL STYLE --- */
        .admin-box { background: white; padding: 15px; margin: 15px; border-radius: 8px; border: 2px dashed var(--secondary); }
        .stat-card { background: #e0f7fa; padding: 15px; margin: 10px; border-radius: 5px; text-align: center; border: 1px solid #00acc1; }

        /* NAV BAR */
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: white; border-top: 1px solid #ddd; display: flex; justify-content: space-around; padding: 8px 0; z-index: 1500; }
        .nav-item { text-align: center; color: #555; font-size: 10px; flex: 1; cursor: pointer; }
        .nav-item i { font-size: 20px; display: block; margin-bottom: 3px; }
        .nav-item.active { color: var(--primary); }
    </style>
</head>
<body>

    <div id="login-overlay">
        <div class="login-card">
            <h2 style="color:var(--primary); font-size:28px; font-style:italic;">Narayan<span style="color:#ffe500">Plus</span></h2>
            <p style="color:#666; margin-bottom:20px;">Secure Login</p>
            
            <input type="text" id="u-id" class="inp-field" placeholder="Mobile Number or Email">
            <input type="text" id="u-name" class="inp-field" placeholder="Your Full Name">
            
            <button class="btn-full" onclick="doLogin()">Login & Save</button>
            <p style="font-size:11px; color:#888; margin-top:15px;">You will stay logged in permanently.</p>
        </div>
    </div>

    <div id="app-container" style="display:none;">
        
        <div id="view-home" class="page active" style="position:relative; z-index:1;">
            <header>
                <div class="logo">Narayan<span style="color:#ffe500">Plus</span></div>
                <div class="cart-icon" onclick="openPage('view-cart')"><i class="fas fa-shopping-cart"></i><span class="badge" id="cart-badge">0</span></div>
            </header>

            <div class="search-area">
                <i class="fas fa-search" style="color:#888; padding:5px;"></i>
                <input type="text" placeholder="Search for Products..." onkeyup="searchProduct(this.value)">
            </div>

            <div class="slider">
                <div class="slides-container" id="slider-track">
                    <div class="slide" style="background: linear-gradient(45deg, #FF512F, #DD2476);">BIG SAVING DAYS</div>
                    <div class="slide" style="background: linear-gradient(45deg, #11998e, #38ef7d);">BEST OFFERS</div>
                    <div class="slide" style="background: linear-gradient(45deg, #2193b0, #6dd5ed);">NEW ARRIVALS</div>
                </div>
            </div>

            <div class="cat-row">
                <div class="cat-box active" onclick="filterCat('All', this)"><div class="cat-circle"><i class="fas fa-th-large"></i></div>All</div>
                <div class="cat-box" onclick="filterCat('Laptop', this)"><div class="cat-circle"><i class="fas fa-laptop"></i></div>Laptop</div>
                <div class="cat-box" onclick="filterCat('Mobile', this)"><div class="cat-circle"><i class="fas fa-mobile-alt"></i></div>Mobile</div>
                <div class="cat-box" onclick="filterCat('Audio', this)"><div class="cat-circle"><i class="fas fa-headphones"></i></div>Audio</div>
            </div>

            <h3 style="padding:10px 15px; color:#333;">Recommended for You</h3>
            <div class="grid" id="product-list"></div>

            <div class="footer">
                <div style="text-align:center; font-weight:bold; font-size:16px; margin-bottom:10px;">Contact Us</div>
                <p><i class="fas fa-map-marker-alt"></i> Near DAV School, Runnisaidpur - 843328</p>
                <p><i class="fas fa-phone"></i> +91 9708797335</p>

                <h3>Business Area</h3>
                <a href="https://wa.me/919708797335?text=Hello+Narayan+Plus,+I+want+to+partner+with+you." class="seller-btn"><i class="fab fa-whatsapp"></i> Become a Partner / Seller</a>

                <h3>My Profile</h3>
                <a href="#" onclick="openPage('view-account')">Order History</a>
                <br><div style="text-align:center;">&copy; 2026 Narayan Services</div>
            </div>
        </div>

        <div class="admin-lock-btn" onclick="askAdminPIN()"><i class="fas fa-lock"></i></div>

        <div id="view-cart" class="page">
            <div class="page-header"><i class="fas fa-arrow-left" onclick="closePage('view-cart')" style="margin-right:15px;"></i> Shopping Cart</div>
            <div id="cart-content" style="padding:15px;"></div>
            
            <div style="padding:15px; background:white; margin-top:10px;">
                <h3>Delivery Address</h3>
                <input id="chk-addr" class="inp-field" placeholder="Full Address with Pincode">
                
                <p style="margin:10px 0; font-weight:bold;">Payment Options:</p>
                <div style="display:flex; gap:10px;">
                    <button class="btn-add" style="background:#eee; color:black;" onclick="setPay('COD')">Cash on Delivery</button>
                    <button class="btn-add" style="background:#eee; color:black;" onclick="setPay('UPI')">UPI / QR Code</button>
                </div>

                <div id="qr-box" style="display:none; text-align:center; margin-top:10px; border:1px dashed #333; padding:10px;">
                    <p style="font-weight:bold;">Scan to Pay</p>
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=upi://pay?pa=9708797335@paytm&pn=NarayanServices" style="width:150px;">
                    <p style="font-size:11px; color:red;">Narayan Services (9708797335)</p>
                </div>
                
                <button class="btn-full" onclick="placeOrder()">CONFIRM ORDER</button>
            </div>
        </div>

        <div id="view-account" class="page">
            <div class="page-header">My Profile</div>
            <div style="background:var(--primary); color:white; padding:30px; display:flex; align-items:center; gap:15px;">
                <div style="width:60px; height:60px; background:white; border-radius:50%; display:flex; align-items:center; justify-content:center; color:var(--primary); font-size:24px;"><i class="fas fa-user"></i></div>
                <div><h2 id="acc-name">User</h2><p id="acc-id">ID: ...</p></div>
            </div>
            <h3 style="padding:15px;">My Orders</h3>
            <div id="order-history" style="padding-bottom:50px;"></div>
            <button onclick="logout()" style="width:90%; margin:20px 5%; padding:15px; background:white; border:1px solid red; color:red; font-weight:bold;">LOGOUT (Clear Data)</button>
        </div>

        <div id="view-admin" class="page">
            <div class="page-header" style="background:#333; color:white;">
                <i class="fas fa-arrow-left" onclick="closePage('view-admin')" style="margin-right:15px;"></i> Admin Dashboard
            </div>
            
            <div class="stat-card">
                <h3><i class="fas fa-users"></i> Store Traffic</h3>
                <div style="font-size:30px; font-weight:bold; color:var(--primary);" id="total-visits">0</div>
                <p>Total Visitors Today</p>
            </div>

            <div class="admin-box">
                <h3 style="color:var(--secondary);"><i class="fas fa-plus-circle"></i> Add New Product</h3>
                <p style="font-size:12px; color:#555;">Details filled here will be live instantly for you.</p>
                
                <label style="font-size:12px; font-weight:bold;">Image Link (URL)</label>
                <input id="prod-img" class="inp-field" placeholder="Paste Image Link">
                
                <label style="font-size:12px; font-weight:bold;">Product Name</label>
                <input id="prod-name" class="inp-field" placeholder="e.g. Sony TV">
                
                <label style="font-size:12px; font-weight:bold;">Price (₹)</label>
                <input id="prod-price" type="number" class="inp-field" placeholder="25000">
                
                <label style="font-size:12px; font-weight:bold;">Category</label>
                <select id="prod-cat" class="inp-field">
                    <option>Mobile</option>
                    <option>Laptop</option>
                    <option>Audio</option>
                    <option>Electronics</option>
                </select>

                <button class="btn-full" onclick="uploadProduct()">UPLOAD TO STORE</button>
            </div>

            <div style="padding:15px;">
                <h4>GitHub Code Generator</h4>
                <textarea id="code-output" style="width:100%; height:80px; font-family:monospace; color:green; padding:5px; border:1px solid #333;"></textarea>
                <p style="font-size:11px; color:red;">*To show products to everyone permanently, copy this code and update 'defaultProducts' in index.html</p>
            </div>
        </div>

        <div class="nav-bar">
            <div class="nav-item active" onclick="closePage('all')"><i class="fas fa-home"></i>Home</div>
            <div class="nav-item" onclick="document.querySelector('.cat-row').scrollIntoView({behavior:'smooth'})"><i class="fas fa-th-large"></i>Catg</div>
            <div class="nav-item" onclick="openPage('view-cart')"><i class="fas fa-shopping-cart"></i>Cart</div>
            <div class="nav-item" onclick="openPage('view-account')"><i class="fas fa-user"></i>Account</div>
        </div>
    </div>

    <script>
        // --- DATA ---
        // 1. Default Products (Code based)
        const defaultProducts = [
            { id:1, name:"HP 15s Ryzen 3", cat:"Laptop", price:35990, mrp:45000, img:"https://m.media-amazon.com/images/I/71ItMeqpnzL._AC_UY327_FMwebp_QL65_.jpg" },
            { id:2, name:"Samsung M14 5G", cat:"Mobile", price:12490, mrp:18990, img:"https://m.media-amazon.com/images/I/817WWpaQqbL._AC_UY327_FMwebp_QL65_.jpg" },
            { id:3, name:"Canon Printer", cat:"Laptop", price:5999, mrp:7500, img:"https://m.media-amazon.com/images/I/51+u0a+JpQL._AC_UY327_FMwebp_QL65_.jpg" }
        ];

        // 2. Uploaded Products (Memory based)
        let uploadedProducts = JSON.parse(localStorage.getItem('admin_uploads')) || [];
        let allProducts = [...uploadedProducts, ...defaultProducts];

        let cart = [], payMode = "COD";
        
        // 3. User & Stats
        let user = JSON.parse(localStorage.getItem('narayan_perm_user'));
        let visits = localStorage.getItem('narayan_visits') || 50;
        visits++; localStorage.setItem('narayan_visits', visits);
        document.getElementById('total-visits').innerText = visits;

        // --- AUTH LOGIC (PERMANENT) ---
        if(user) {
            document.getElementById('login-overlay').style.display = 'none';
            document.getElementById('app-container').style.display = 'block';
            updateProfile();
        }

        function doLogin() {
            let id = document.getElementById('u-id').value;
            let name = document.getElementById('u-name').value;
            if(!id || !name) return alert("Fill all details");
            
            user = { id: id, name: name };
            localStorage.setItem('narayan_perm_user', JSON.stringify(user));
            location.reload(); // Refresh to enter
        }

        function logout() {
            if(confirm("Are you sure? This will remove saved data.")) {
                localStorage.removeItem('narayan_perm_user');
                location.reload();
            }
        }

        function updateProfile() {
            document.getElementById('acc-name').innerText = user.name;
            document.getElementById('acc-id').innerText = user.id;
            loadOrders();
        }

        // --- ADMIN LOGIC (PIN 7482) ---
        function askAdminPIN() {
            let pin = prompt("Enter Admin PIN:");
            if(pin === "7482") {
                openPage('view-admin');
            } else {
                alert("Wrong PIN! Access Denied.");
            }
        }

        function uploadProduct() {
            let img = document.getElementById('prod-img').value;
            let name = document.getElementById('prod-name').value;
            let price = document.getElementById('prod-price').value;
            let cat = document.getElementById('prod-cat').value;

            if(!img || !name || !price) return alert("Fill all details");

            let newP = { id: Date.now(), name: name, price: price, img: img, cat: cat, mrp: parseInt(price)+500 };
            
            // Save to memory
            uploadedProducts.unshift(newP);
            localStorage.setItem('admin_uploads', JSON.stringify(uploadedProducts));
            
            // Generate Code
            let code = `{ id:${newP.id}, name:"${name}", cat:"${cat}", price:${price}, mrp:${newP.mrp}, img:"${img}" },`;
            document.getElementById('code-output').value = code;

            // Refresh Grid
            allProducts = [...uploadedProducts, ...defaultProducts];
            render(allProducts);
            alert("Product Uploaded! Check Home Page.");
            
            // Clear inputs
            document.getElementById('prod-name').value = "";
        }

        // --- APP LOGIC ---
        function render(list) {
            let d = document.getElementById('product-list'); d.innerHTML="";
            list.forEach(p=>{
                let off = Math.round(((p.mrp - p.price)/p.mrp)*100) || 10;
                d.innerHTML += `
                    <div class="card">
                        <img src="${p.img}">
                        <div class="p-title">${p.name}</div>
                        <div><span class="p-price">₹${p.price}</span> <span style="font-size:11px; color:green;">${off}% OFF</span></div>
                        <button class="btn-add" onclick="add(${p.id})">ADD</button>
                    </div>`;
            });
        }
        render(allProducts);

        function filterCat(c,e) { document.querySelectorAll('.cat-box').forEach(x=>x.classList.remove('active')); if(e)e.classList.add('active'); render(c==='All'?allProducts:allProducts.filter(p=>p.cat===c)); }
        function searchProduct(q) { render(allProducts.filter(p=>p.name.toLowerCase().includes(q.toLowerCase()))); }
        function add(id) { cart.push(allProducts.find(p=>p.id===id)); document.getElementById('cart-badge').innerText=cart.length; alert("Added!"); }

        function setPay(m) { payMode=m; document.getElementById('qr-box').style.display = (m==='UPI')?'block':'none'; }

        function placeOrder() {
            let addr = document.getElementById('chk-addr').value;
            if(!addr) return alert("Enter Address");
            if(cart.length===0) return;
            
            let items = cart.map(i=>i.name).join(", ");
            let total = cart.reduce((a,b)=>a+parseInt(b.price),0);
            
            let url = `https://wa.me/919708797335?text=*NEW ORDER*%0AUser: ${user.name} (${user.id})%0AAddr: ${addr}%0AItems: ${items}%0APay: ${payMode}%0ATotal: ₹${total}`;
            window.open(url);
            
            let h = JSON.parse(localStorage.getItem('n_orders'))||[];
            h.unshift({date:new Date().toLocaleDateString(), items, total, status:"Placed"});
            localStorage.setItem('n_orders', JSON.stringify(h));
            
            cart=[]; document.getElementById('cart-badge').innerText=0;
            closePage('view-cart'); openPage('view-account'); loadOrders();
        }

        function loadOrders() {
            let h = JSON.parse(localStorage.getItem('n_orders'))||[];
            let d = document.getElementById('order-history'); d.innerHTML="";
            h.forEach(o=>{ d.innerHTML+=`<div style="background:#f9f9f9; padding:10px; margin:10px; border-left:4px solid green;"><div style="font-size:12px;">${o.date}</div><div><b>${o.items}</b></div><div>Total: ₹${o.total}</div></div>`; });
        }

        // Navigation
        function openPage(id) { document.querySelectorAll('.page').forEach(p=>p.classList.remove('active')); document.getElementById(id).classList.add('active'); if(id==='view-cart')renderCart(); }
        function closePage(id) { if(id==='view-admin')document.getElementById('view-admin').classList.remove('active'); else if(id==='view-cart')document.getElementById('view-cart').classList.remove('active'); else document.querySelectorAll('.page').forEach(p=>p.classList.remove('active')); }
        
        function renderCart() {
            let d=document.getElementById('cart-content'); d.innerHTML=""; let t=0;
            if(cart.length===0) d.innerHTML="Empty";
            cart.forEach(i=>{ t+=parseInt(i.price); d.innerHTML+=`<div style="border-bottom:1px solid #eee; padding:10px 0; display:flex; justify-content:space-between;"><span>${i.name}</span><b>₹${i.price}</b></div>`; });
            d.innerHTML+=`<h3 style="text-align:right; margin-top:10px;">Total: ₹${t}</h3>`;
        }

        // Auto Slider
        let si=0; setInterval(()=>{ si=(si>2)?0:si+1; document.getElementById('slider-track').style.transform=`translateX(-${si*100}%)`; }, 3000);
    </script>
</body>
</html>
