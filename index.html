<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Narayan E-Store</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- PROFESSIONAL APP THEME --- */
        :root {
            --primary: #2874f0; /* Flipkart Blue */
            --secondary: #fb641b; /* Orange Action */
            --bg: #f1f2f4;
            --white: #ffffff;
            --text: #212121;
            --green: #388e3c;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        body { background-color: var(--bg); padding-bottom: 60px; -webkit-tap-highlight-color: transparent; }

        /* HEADER */
        header { background: var(--primary); padding: 10px 15px; position: sticky; top: 0; z-index: 1000; display: flex; align-items: center; gap: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .logo { color: white; font-size: 18px; font-weight: 700; font-style: italic; flex-grow: 1; }
        .header-icons { color: white; display: flex; gap: 20px; font-size: 18px; }
        .cart-icon-wrap { position: relative; }
        .badge { position: absolute; top: -8px; right: -8px; background: #ff6161; color: white; font-size: 10px; padding: 2px 5px; border-radius: 10px; border: 1px solid white; }

        /* SEARCH */
        .search-bar { background: white; margin: 10px; padding: 10px; border-radius: 4px; display: flex; align-items: center; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
        .search-bar input { border: none; width: 100%; outline: none; margin-left: 10px; font-size: 14px; }

        /* BANNER SLIDER */
        .slider-container { width: 100%; overflow: hidden; position: relative; height: 160px; background: #ddd; }
        .slider-wrapper { display: flex; transition: transform 0.5s ease-in-out; height: 100%; }
        .slide { min-width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 20px; color: white; font-weight: bold; background-size: cover; background-position: center; }
        
        /* CATEGORIES */
        .categories { display: flex; overflow-x: auto; padding: 10px; background: white; gap: 15px; scrollbar-width: none; }
        .cat-item { min-width: 70px; text-align: center; }
        .cat-img { width: 50px; height: 50px; border-radius: 50%; background: #e0f7fa; margin: 0 auto 5px; display: flex; align-items: center; justify-content: center; }
        .cat-img i { font-size: 20px; color: var(--primary); }
        .cat-name { font-size: 11px; font-weight: 500; color: #444; }

        /* PRODUCT LIST (GRID) */
        .section-header { padding: 15px; background: white; margin-top: 10px; font-weight: 600; font-size: 16px; border-bottom: 1px solid #eee; }
        .product-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2px; padding-top: 2px; }
        .card { background: white; padding: 10px; display: flex; flex-direction: column; position: relative; border: 1px solid #f0f0f0; }
        .wishlist-icon { position: absolute; top: 10px; right: 10px; color: #ccc; }
        .card-img { width: 100%; height: 140px; object-fit: contain; margin-bottom: 10px; }
        .prod-title { font-size: 13px; color: #333; margin-bottom: 4px; line-height: 1.4; height: 36px; overflow: hidden; }
        .prod-price { font-size: 16px; font-weight: 600; }
        .prod-mrp { font-size: 12px; text-decoration: line-through; color: #878787; margin-left: 5px; }
        .prod-off { font-size: 12px; color: var(--green); font-weight: 600; margin-left: 5px; }
        .free-del { font-size: 10px; color: #333; border: 1px solid #eee; display: inline-block; padding: 2px 4px; border-radius: 2px; margin-top: 5px; background: #fafafa; }

        /* SINGLE PRODUCT VIEW (DETAIL PAGE) */
        .full-page { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 2000; overflow-y: auto; display: none; padding-bottom: 60px; }
        .full-page.active { display: block; animation: slideIn 0.3s; }
        @keyframes slideIn { from {transform: translateX(100%);} to {transform: translateX(0);} }
        
        .detail-header { padding: 10px; display: flex; align-items: center; border-bottom: 1px solid #eee; position: sticky; top: 0; background: white; z-index: 10; }
        .detail-img { width: 100%; height: 300px; object-fit: contain; padding: 20px; }
        .detail-info { padding: 15px; }
        .detail-price { font-size: 24px; font-weight: 600; }
        .offers-box { border: 1px dashed var(--green); background: #f0fff4; padding: 10px; border-radius: 4px; margin: 10px 0; font-size: 12px; }
        
        .bottom-actions { position: fixed; bottom: 0; width: 100%; display: flex; height: 50px; z-index: 2100; }
        .action-btn { flex: 1; border: none; font-weight: 600; font-size: 14px; cursor: pointer; color: white; display: flex; align-items: center; justify-content: center; }
        .btn-cart { background: white; color: #212121; border-top: 1px solid #eee; }
        .btn-buy { background: var(--secondary); }

        /* CHECKOUT FORMS */
        .form-container { padding: 20px; }
        .input-box { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 15px; font-size: 14px; }
        .pay-method { padding: 15px; border: 1px solid #eee; margin-bottom: 10px; border-radius: 5px; display: flex; align-items: center; gap: 15px; }
        .pay-method.active { border-color: var(--primary); background: #f0f7ff; }

        /* BOTTOM NAV */
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: white; border-top: 1px solid #eee; display: flex; justify-content: space-around; padding: 8px 0; z-index: 1000; }
        .nav-item { text-align: center; color: #666; font-size: 10px; }
        .nav-item i { font-size: 20px; margin-bottom: 3px; display: block; }
        .nav-item.active { color: var(--primary); }

        /* ORDER HISTORY */
        .order-card { background: white; padding: 15px; margin: 10px; border-radius: 5px; border-left: 4px solid var(--green); box-shadow: 0 1px 3px rgba(0,0,0,0.1); }

    </style>
</head>
<body>

    <div id="page-home" class="page-view">
        <header>
            <div class="logo">Narayan<span style="color:#ffe500">Plus</span></div>
            <div class="header-icons">
                <div class="cart-icon-wrap" onclick="showCart()">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="badge" id="cart-count">0</span>
                </div>
            </div>
        </header>

        <div class="search-bar">
            <i class="fas fa-search" style="color:#888;"></i>
            <input type="text" placeholder="Search for Products, Brands and More" onkeyup="searchProd(this.value)">
        </div>

        <div class="slider-container">
            <div class="slider-wrapper" id="slider">
                <div class="slide" style="background-image: linear-gradient(45deg, #004e92, #000428);">BIG SALE LIVE</div>
                <div class="slide" style="background-image: linear-gradient(45deg, #ff416c, #ff4b2b);">50% OFF TODAY</div>
                <div class="slide" style="background-image: linear-gradient(45deg, #11998e, #38ef7d);">NEW ARRIVALS</div>
            </div>
        </div>

        <div class="categories">
            <div class="cat-item" onclick="filterProd('All')"><div class="cat-img"><i class="fas fa-th-large"></i></div><span class="cat-name">All</span></div>
            <div class="cat-item" onclick="filterProd('Laptop')"><div class="cat-img"><i class="fas fa-laptop"></i></div><span class="cat-name">Laptops</span></div>
            <div class="cat-item" onclick="filterProd('Mobile')"><div class="cat-img"><i class="fas fa-mobile-alt"></i></div><span class="cat-name">Mobiles</span></div>
            <div class="cat-item" onclick="filterProd('Audio')"><div class="cat-img"><i class="fas fa-headphones"></i></div><span class="cat-name">Audio</span></div>
        </div>

        <div class="section-header">Recommended for You</div>
        <div class="product-grid" id="product-container"></div>
    </div>

    <div id="page-detail" class="full-page">
        <div class="detail-header">
            <i class="fas fa-arrow-left" style="font-size: 20px; padding: 5px;" onclick="closeDetail()"></i>
            <span style="margin-left: 15px; font-weight: 600;">Product Details</span>
        </div>
        <img id="detail-img" class="detail-img" src="">
        <div class="detail-info">
            <div style="font-size: 14px; color: #666;">Narayan Assured <i class="fas fa-check-circle" style="color: var(--primary)"></i></div>
            <h2 id="detail-title" style="margin: 5px 0; font-size: 18px; line-height:1.4;"></h2>
            <div style="margin: 10px 0;">
                <span id="detail-price" class="detail-price"></span>
                <span id="detail-mrp" style="text-decoration: line-through; color: #888; margin-left: 10px;"></span>
                <span style="color: green; font-weight: bold; margin-left: 10px;">Special Price</span>
            </div>
            
            <div class="offers-box">
                <p><i class="fas fa-tag"></i> <b>Bank Offer:</b> 5% Cashback on UPI</p>
                <p style="margin-top:5px;"><i class="fas fa-truck"></i> <b>Free Delivery</b> by Tomorrow</p>
            </div>
            
            <h3>Description</h3>
            <p id="detail-desc" style="color: #555; font-size: 14px; line-height: 1.6; margin-top: 5px;"></p>
        </div>

        <div class="bottom-actions">
            <button class="action-btn btn-cart" onclick="addToCartCurrent()">ADD TO CART</button>
            <button class="action-btn btn-buy" onclick="startCheckout()">BUY NOW</button>
        </div>
    </div>

    <div id="page-checkout" class="full-page">
        <div class="detail-header">
            <i class="fas fa-arrow-left" onclick="document.getElementById('page-checkout').classList.remove('active')"></i>
            <span style="margin-left: 15px; font-weight: 600;">Order Summary</span>
        </div>
        
        <div class="form-container">
            <h3>1. Delivery Address</h3>
            <br>
            <input type="text" id="name" class="input-box" placeholder="Full Name (Required)">
            <input type="tel" id="phone" class="input-box" placeholder="Phone Number (Required)">
            <input type="text" id="address" class="input-box" placeholder="House No, Building, Area">
            <div style="display: flex; gap: 10px;">
                <input type="text" id="city" class="input-box" placeholder="City">
                <input type="number" id="pincode" class="input-box" placeholder="Pincode">
            </div>

            <h3 style="margin-top: 20px;">2. Payment Options</h3>
            <br>
            <div class="pay-method active" onclick="selectPay(this, 'COD')">
                <i class="fas fa-money-bill-wave" style="color: green; font-size: 20px;"></i>
                <div>
                    <div style="font-weight: 600;">Cash on Delivery</div>
                    <div style="font-size: 12px; color: #666;">Pay when item arrives</div>
                </div>
            </div>
            <div class="pay-method" onclick="selectPay(this, 'UPI')">
                <i class="fab fa-google-pay" style="color: #444; font-size: 20px;"></i>
                <div>
                    <div style="font-weight: 600;">UPI / Online</div>
                    <div style="font-size: 12px; color: #666;">GPay / PhonePe (Link on WhatsApp)</div>
                </div>
            </div>

            <div style="border-top: 1px solid #ddd; margin-top: 20px; padding-top: 15px;">
                <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 18px;">
                    <span>Total Amount</span>
                    <span id="checkout-total">₹0</span>
                </div>
            </div>

            <button onclick="placeOrder()" style="width: 100%; background: var(--secondary); color: white; border: none; padding: 15px; font-weight: bold; margin-top: 20px; border-radius: 4px; font-size: 16px;">CONFIRM ORDER</button>
        </div>
    </div>

    <div id="page-account" class="full-page" style="background: #f1f2f4;">
        <div class="detail-header">
            <span style="font-weight: 600; font-size: 18px;">My Account</span>
        </div>
        <div style="background: white; padding: 20px; margin-bottom: 10px;">
            <div style="display: flex; gap: 15px; align-items: center;">
                <div style="width: 50px; height: 50px; background: #ddd; border-radius: 50%; display: flex; align-items: center; justify-content: center;"><i class="fas fa-user"></i></div>
                <div>
                    <div style="font-weight: bold;">Hello, User</div>
                    <div style="font-size: 12px; color: #666;">+91 9708797335</div>
                </div>
            </div>
        </div>
        <div style="padding: 15px; font-weight: bold; color: #666;">MY ORDERS</div>
        <div id="order-history-list">
            </div>
        <div style="padding: 10px; text-align: center;">
            <button onclick="document.getElementById('page-account').classList.remove('active')" style="padding: 10px 20px; border: 1px solid #ddd; background: white;">Back to Home</button>
        </div>
    </div>

    <div class="nav-bar">
        <div class="nav-item active" onclick="document.querySelectorAll('.full-page').forEach(el=>el.classList.remove('active'))">
            <i class="fas fa-home"></i> Home
        </div>
        <div class="nav-item">
            <i class="fas fa-th-large"></i> Category
        </div>
        <div class="nav-item" onclick="showAccount()">
            <i class="fas fa-user"></i> Account
        </div>
        <div class="nav-item" onclick="showCart()">
            <i class="fas fa-shopping-cart"></i> Cart
        </div>
    </div>

    <script>
        // --- DATA ---
        const products = [
            { id: 1, name: "HP 15s Ryzen 3 Thin & Light Laptop", cat: "Laptop", price: 35990, mrp: 46000, img: "https://m.media-amazon.com/images/I/71ItMeqpnzL._AC_UY327_FMwebp_QL65_.jpg", desc: "8GB RAM, 512GB SSD, Windows 11, 15.6 inch FHD Display." },
            { id: 2, name: "Samsung Galaxy M14 5G", cat: "Mobile", price: 12490, mrp: 18990, img: "https://m.media-amazon.com/images/I/817WWpaQqbL._AC_UY327_FMwebp_QL65_.jpg", desc: "6000mAh Battery, 50MP Triple Camera, 5nm Processor." },
            { id: 3, name: "boAt Airdopes 141", cat: "Audio", price: 1299, mrp: 4490, img: "https://m.media-amazon.com/images/I/61KNJav3v9L._AC_UY327_FMwebp_QL65_.jpg", desc: "42H Playtime, Beast Mode, ENx Tech, ASAP Charge." },
            { id: 4, name: "Canon Pixma E477 All-in-One", cat: "Laptop", price: 5999, mrp: 7500, img: "https://m.media-amazon.com/images/I/51+u0a+JpQL._AC_UY327_FMwebp_QL65_.jpg", desc: "Wireless Ink Efficient Color Printer." },
            { id: 5, name: "Dell Optical Mouse", cat: "Laptop", price: 399, mrp: 650, img: "https://m.media-amazon.com/images/I/51kdFkdrVXL._AC_UY327_FMwebp_QL65_.jpg", desc: "USB Wired Optical Mouse with 3 buttons." }
        ];

        let cart = [];
        let currentProduct = null;
        let paymentMode = "COD";

        // --- INIT ---
        const grid = document.getElementById('product-container');
        
        function renderProd(list) {
            grid.innerHTML = "";
            list.forEach(p => {
                const off = Math.round(((p.mrp - p.price)/p.mrp)*100);
                grid.innerHTML += `
                    <div class="card" onclick="openProduct(${p.id})">
                        <div class="wishlist-icon"><i class="fas fa-heart"></i></div>
                        <img src="${p.img}" class="card-img">
                        <div class="prod-title">${p.name}</div>
                        <div style="display:flex; align-items:center;">
                            <span class="prod-price">₹${p.price.toLocaleString()}</span>
                            <span class="prod-mrp">₹${p.mrp}</span>
                            <span class="prod-off">${off}% off</span>
                        </div>
                        <span class="free-del">Free Delivery</span>
                    </div>
                `;
            });
        }
        renderProd(products);

        // --- SLIDER LOGIC ---
        let slideIndex = 0;
        setInterval(() => {
            slideIndex++;
            if(slideIndex > 2) slideIndex = 0;
            document.getElementById('slider').style.transform = `translateX(-${slideIndex * 100}%)`;
        }, 3000);

        // --- PRODUCT DETAIL LOGIC ---
        function openProduct(id) {
            currentProduct = products.find(p => p.id === id);
            document.getElementById('detail-img').src = currentProduct.img;
            document.getElementById('detail-title').innerText = currentProduct.name;
            document.getElementById('detail-price').innerText = "₹" + currentProduct.price.toLocaleString();
            document.getElementById('detail-mrp').innerText = "₹" + currentProduct.mrp;
            document.getElementById('detail-desc').innerText = currentProduct.desc;
            document.getElementById('page-detail').classList.add('active');
        }

        function closeDetail() {
            document.getElementById('page-detail').classList.remove('active');
        }

        // --- CART & CHECKOUT ---
        function addToCartCurrent() {
            if(!currentProduct) return;
            cart.push(currentProduct);
            document.getElementById('cart-count').innerText = cart.length;
            alert("Added to Cart");
        }

        function startCheckout() {
            // Agar cart khali hai aur direct buy daba, toh current add karo
            if(cart.length === 0 && currentProduct) {
                cart.push(currentProduct);
            } else if (cart.length === 0 && !currentProduct) {
                alert("Cart is empty");
                return;
            }
            
            let total = cart.reduce((sum, item) => sum + item.price, 0);
            document.getElementById('checkout-total').innerText = "₹" + total.toLocaleString();
            document.getElementById('page-checkout').classList.add('active');
        }

        function selectPay(el, mode) {
            document.querySelectorAll('.pay-method').forEach(e => e.classList.remove('active'));
            el.classList.add('active');
            paymentMode = mode;
        }

        function placeOrder() {
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const address = document.getElementById('address').value;
            
            if(!name || !phone || !address) {
                alert("Please fill Name, Phone and Address");
                return;
            }

            let total = cart.reduce((sum, item) => sum + item.price, 0);
            let itemNames = cart.map(i => i.name).join(", ");

            // 1. SAVE TO HISTORY (Local Storage)
            const order = {
                id: "ORD" + Math.floor(Math.random()*10000),
                date: new Date().toLocaleDateString(),
                items: itemNames,
                total: total,
                status: "Order Placed"
            };
            let history = JSON.parse(localStorage.getItem('narayan_orders')) || [];
            history.unshift(order);
            localStorage.setItem('narayan_orders', JSON.stringify(history));

            // 2. WHATSAPP MESSAGE
            let msg = `*NEW ORDER REQUEST* %0A------------------%0A`;
            msg += `*Name:* ${name}%0A*Phone:* ${phone}%0A*Address:* ${address}%0A`;
            msg += `*Items:* ${itemNames}%0A`;
            msg += `*Total Amount:* ₹${total}%0A`;
            msg += `*Payment Mode:* ${paymentMode}%0A`;
            msg += `------------------%0AConfirm this order?`;

            const url = `https://wa.me/919708797335?text=${msg}`;
            
            // Cleanup
            cart = [];
            document.getElementById('cart-count').innerText = 0;
            document.querySelectorAll('.full-page').forEach(el=>el.classList.remove('active'));
            
            // Redirect
            window.open(url, '_blank');
        }

        // --- ACCOUNT & HISTORY ---
        function showAccount() {
            const history = JSON.parse(localStorage.getItem('narayan_orders')) || [];
            const container = document.getElementById('order-history-list');
            container.innerHTML = "";

            if(history.length === 0) {
                container.innerHTML = "<p style='text-align:center; padding:20px; color:#999;'>No orders yet.</p>";
            } else {
                history.forEach(o => {
                    container.innerHTML += `
                        <div class="order-card">
                            <div style="display:flex; justify-content:space-between;">
                                <span style="font-weight:bold; color:#333;">${o.id}</span>
                                <span style="color:gray; font-size:12px;">${o.date}</span>
                            </div>
                            <p style="font-size:13px; margin:5px 0; color:#555;">${o.items}</p>
                            <div style="display:flex; justify-content:space-between; margin-top:10px;">
                                <b>₹${o.total}</b>
                                <span style="color:green; font-weight:bold;">${o.status}</span>
                            </div>
                        </div>
                    `;
                });
            }
            document.getElementById('page-account').classList.add('active');
        }

        function showCart() {
            if(cart.length === 0) {
                alert("Cart is Empty");
            } else {
                startCheckout();
            }
        }

        function filterProd(cat) {
            if(cat === 'All') renderProd(products);
            else renderProd(products.filter(p => p.cat === cat));
        }
        
        function searchProd(q) {
            const term = q.toLowerCase();
            renderProd(products.filter(p => p.name.toLowerCase().includes(term)));
        }

    </script>
</body>
</html>
