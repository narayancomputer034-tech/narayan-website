<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Narayan Plus</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- THEME --- */
        :root {
            --primary: #2874f0;
            --secondary: #fb641b;
            --bg: #f1f2f4;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: sans-serif; }
        body { background-color: var(--bg); padding-bottom: 60px; -webkit-tap-highlight-color: transparent; }

        /* --- LOGIN SCREEN (OVERLAY) --- */
        #login-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--primary); z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; transition: 0.3s; }
        .login-box { background: white; width: 90%; max-width: 400px; padding: 25px; border-radius: 8px; color: #333; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .login-input { width: 100%; padding: 12px; margin: 15px 0; border: 1px solid #ccc; border-radius: 4px; font-size: 16px; outline: none; }
        .login-btn { width: 100%; padding: 12px; background: var(--secondary); color: white; border: none; font-weight: bold; font-size: 16px; border-radius: 2px; cursor: pointer; }
        .hidden { display: none !important; }

        /* --- MAIN APP DESIGN --- */
        header { background: var(--primary); padding: 10px 15px; position: sticky; top: 0; z-index: 1000; display: flex; align-items: center; gap: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .logo { color: white; font-size: 18px; font-weight: bold; font-style: italic; flex-grow: 1; }
        .cart-wrap { position: relative; color: white; font-size: 20px; }
        .badge { position: absolute; top: -5px; right: -8px; background: #ff6161; color: white; font-size: 10px; padding: 2px 5px; border-radius: 10px; border: 1px solid white; }

        /* SEARCH & SLIDER */
        .search-bar { background: white; margin: 10px; padding: 10px; display: flex; align-items: center; border-radius: 2px; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
        .search-bar input { border: none; width: 100%; margin-left: 10px; outline: none; }
        .slider-box { height: 160px; overflow: hidden; background: #ddd; width: 100%; }
        .slides { display: flex; height: 100%; transition: 0.5s; }
        .slide { min-width: 100%; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; font-weight: bold; background: linear-gradient(45deg, #11998e, #38ef7d); }

        /* PRODUCTS */
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; padding: 5px; }
        .card { background: white; padding: 10px; border-radius: 2px; position: relative; }
        .card img { width: 100%; height: 130px; object-fit: contain; }
        .p-name { font-size: 13px; height: 36px; overflow: hidden; margin: 5px 0; color: #212121; }
        .p-price { font-weight: bold; font-size: 16px; }

        /* MODALS & PAGES */
        .full-page { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 2000; display: none; overflow-y: auto; }
        .full-page.active { display: block; animation: slideUp 0.3s; }
        @keyframes slideUp { from{transform:translateY(100%)} to{transform:translateY(0)} }
        
        .header-back { padding: 15px; border-bottom: 1px solid #eee; display: flex; align-items: center; font-weight: bold; background: white; position: sticky; top: 0; }
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: white; border-top: 1px solid #eee; display: flex; justify-content: space-around; padding: 8px 0; z-index: 1500; }
        .nav-item { text-align: center; font-size: 10px; color: #666; }
        .nav-item i { font-size: 20px; display: block; margin-bottom: 3px; }
        .nav-item.active { color: var(--primary); }

        /* ACCOUNT & FOOTER */
        .footer { background: #172337; color: white; padding: 20px; margin-top: 20px; font-size: 12px; }
        .earn-btn { display: block; background: var(--secondary); color: white; text-align: center; padding: 10px; margin-top: 10px; text-decoration: none; font-weight: bold; border-radius: 4px; }

    </style>
</head>
<body>

    <div id="login-screen">
        <div class="logo" style="font-size: 30px; margin-bottom: 20px;">Narayan<span style="color:#ffe500">Plus</span></div>
        
        <div id="step-1" class="login-box">
            <h3>Login to Continue</h3>
            <p style="font-size:12px; color:#666; margin-top:5px;">Enter your mobile number</p>
            <input type="tel" id="login-phone" class="login-input" placeholder="+91 Mobile Number">
            <button class="login-btn" onclick="sendOtp()">Request OTP</button>
        </div>

        <div id="step-2" class="login-box hidden">
            <h3>Verify OTP</h3>
            <p style="font-size:12px; color:#666; margin-top:5px;">OTP sent to your mobile</p>
            <input type="number" id="login-otp" class="login-input" placeholder="Enter OTP (Try: 1234)">
            <button class="login-btn" onclick="verifyOtp()">Verify</button>
        </div>

        <div id="step-3" class="login-box hidden">
            <h3>Welcome!</h3>
            <p style="font-size:12px; color:#666; margin-top:5px;">Enter your full name</p>
            <input type="text" id="login-name" class="login-input" placeholder="Your Name">
            <button class="login-btn" onclick="completeLogin()">Start Shopping</button>
        </div>
    </div>

    <div id="app-content">
        
        <div id="home-view" class="page">
            <header>
                <div class="logo">Narayan<span style="color:#ffe500">Plus</span></div>
                <div class="cart-wrap" onclick="openCart()">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="badge" id="badge">0</span>
                </div>
            </header>

            <div class="search-bar">
                <i class="fas fa-search" style="color:#888;"></i>
                <input type="text" placeholder="Search for Products..." onkeyup="searchProd(this.value)">
            </div>

            <div class="slider-box">
                <div class="slides" id="slider">
                    <div class="slide" style="background:#2874f0;">SALE IS LIVE</div>
                    <div class="slide" style="background:#fb641b;">NEW ARRIVALS</div>
                    <div class="slide" style="background:#388e3c;">BEST PRICES</div>
                </div>
            </div>

            <div style="padding:10px; font-weight:bold; background:white; margin-top:10px;">Latest Products</div>
            <div class="grid" id="product-grid"></div>

            <div class="footer">
                <h3>Become a Seller</h3>
                <p>Sell products on Narayan Plus and earn money.</p>
                <a href="https://wa.me/919708797335?text=I%20want%20to%20be%20a%20seller" class="earn-btn">
                    <i class="fab fa-whatsapp"></i> Join as Seller
                </a>
                <p style="text-align:center; margin-top:20px;">&copy; 2026 Narayan Services</p>
            </div>
        </div>

        <div id="detail-view" class="full-page">
            <div class="header-back">
                <i class="fas fa-arrow-left" onclick="closeDetail()" style="margin-right:10px;"></i> Details
            </div>
            <img id="d-img" style="width:100%; height:250px; object-fit:contain; margin-top:20px;">
            <div style="padding:15px;">
                <h2 id="d-name"></h2>
                <h1 id="d-price" style="margin:10px 0;"></h1>
                <p id="d-desc" style="color:#666; line-height:1.5; font-size:14px;"></p>
            </div>
            <div style="position:fixed; bottom:0; width:100%; display:flex;">
                <button onclick="addToCart()" style="flex:1; padding:15px; background:white; border:1px solid #ddd; font-weight:bold;">ADD TO CART</button>
                <button onclick="buyNow()" style="flex:1; padding:15px; background:var(--secondary); color:white; border:none; font-weight:bold;">BUY NOW</button>
            </div>
        </div>

        <div id="cart-view" class="full-page">
            <div class="header-back">
                <i class="fas fa-arrow-left" onclick="closeCart()" style="margin-right:10px;"></i> My Cart
            </div>
            <div id="cart-items" style="padding:15px;"></div>
            <div style="padding:15px; border-top:5px solid #eee;">
                <h3>Checkout</h3>
                <br>
                <input id="addr" class="login-input" placeholder="Full Address (Village, Road, PIN)">
                <p style="margin:10px 0; font-weight:bold;">Payment:</p>
                <label style="display:block; padding:10px; border:1px solid #ddd; border-radius:4px;">
                    <input type="radio" name="pay" value="COD" checked> Cash on Delivery
                </label>
                <label style="display:block; padding:10px; border:1px solid #ddd; border-radius:4px; margin-top:5px;">
                    <input type="radio" name="pay" value="UPI"> UPI / Online
                </label>
                <button onclick="placeOrder()" class="login-btn" style="margin-top:20px;">CONFIRM ORDER</button>
            </div>
        </div>

        <div id="account-view" class="full-page">
            <div class="header-back">My Account</div>
            <div style="padding:20px; background:white; display:flex; align-items:center; gap:15px;">
                <div style="width:50px; height:50px; background:#eee; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:24px;"><i class="fas fa-user"></i></div>
                <div>
                    <h3 id="acc-name">User</h3>
                    <p id="acc-phone" style="color:gray; font-size:13px;">+91...</p>
                </div>
            </div>
            <div style="padding:15px; font-weight:bold; color:#555;">MY ORDERS</div>
            <div id="order-list" style="padding-bottom:20px;"></div>
            <button onclick="logout()" style="width:100%; padding:15px; background:white; border:1px solid #ddd; color:red; margin-top:20px;">LOGOUT</button>
        </div>

        <div class="nav-bar">
            <div class="nav-item active" onclick="showTab('home')"><i class="fas fa-home"></i> Home</div>
            <div class="nav-item" onclick="openCart()"><i class="fas fa-shopping-cart"></i> Cart</div>
            <div class="nav-item" onclick="showTab('account')"><i class="fas fa-user"></i> Account</div>
        </div>

    </div>

    <script>
        // --- DATA & STATE ---
        const products = [
            {id:1, name:"HP 15s Laptop", price:35990, img:"https://m.media-amazon.com/images/I/71ItMeqpnzL._AC_UY327_FMwebp_QL65_.jpg", desc:"Ryzen 3, 8GB RAM, 512GB SSD"},
            {id:2, name:"Samsung M14 5G", price:12490, img:"https://m.media-amazon.com/images/I/817WWpaQqbL._AC_UY327_FMwebp_QL65_.jpg", desc:"50MP Camera, 6000mAh Battery"},
            {id:3, name:"boAt Airdopes", price:1299, img:"https://m.media-amazon.com/images/I/61KNJav3v9L._AC_UY327_FMwebp_QL65_.jpg", desc:"Wireless Earbuds, 42H Playtime"},
            {id:4, name:"Wireless Mouse", price:499, img:"https://m.media-amazon.com/images/I/51kdFkdrVXL._AC_UY327_FMwebp_QL65_.jpg", desc:"Dell Optical Mouse"}
        ];
        let cart = [];
        let currentItem = null;
        let user = JSON.parse(localStorage.getItem('narayan_user'));

        // --- INIT ---
        if(user) {
            document.getElementById('login-screen').classList.add('hidden');
            updateAccountUI();
        } else {
            // Show Login screen
        }
        renderProducts(products);
        loadOrders();

        // --- LOGIN LOGIC ---
        function sendOtp() {
            let ph = document.getElementById('login-phone').value;
            if(ph.length < 10) return alert("Enter valid 10-digit number");
            document.getElementById('step-1').classList.add('hidden');
            document.getElementById('step-2').classList.remove('hidden');
            alert("Your OTP is 1234"); // Fake OTP
        }
        function verifyOtp() {
            let otp = document.getElementById('login-otp').value;
            if(otp === "1234") {
                document.getElementById('step-2').classList.add('hidden');
                document.getElementById('step-3').classList.remove('hidden');
            } else {
                alert("Wrong OTP");
            }
        }
        function completeLogin() {
            let name = document.getElementById('login-name').value;
            let phone = document.getElementById('login-phone').value;
            if(!name) return alert("Enter Name");
            
            user = { name: name, phone: phone };
            localStorage.setItem('narayan_user', JSON.stringify(user));
            updateAccountUI();
            document.getElementById('login-screen').classList.add('hidden');
        }
        function logout() {
            localStorage.removeItem('narayan_user');
            location.reload();
        }
        function updateAccountUI() {
            if(user) {
                document.getElementById('acc-name').innerText = user.name;
                document.getElementById('acc-phone').innerText = user.phone;
            }
        }

        // --- APP LOGIC ---
        function renderProducts(list) {
            const grid = document.getElementById('product-grid');
            grid.innerHTML = "";
            list.forEach(p => {
                grid.innerHTML += `
                    <div class="card" onclick="openDetail(${p.id})">
                        <img src="${p.img}">
                        <div class="p-name">${p.name}</div>
                        <div class="p-price">₹${p.price}</div>
                    </div>
                `;
            });
        }
        function searchProd(q) {
            let term = q.toLowerCase();
            renderProducts(products.filter(p => p.name.toLowerCase().includes(term)));
        }

        // Slider
        let sIdx = 0;
        setInterval(() => {
            sIdx = (sIdx > 2) ? 0 : sIdx + 1;
            document.getElementById('slider').style.transform = `translateX(-${sIdx * 100}%)`;
        }, 3000);

        // Details
        function openDetail(id) {
            currentItem = products.find(p => p.id === id);
            document.getElementById('d-img').src = currentItem.img;
            document.getElementById('d-name').innerText = currentItem.name;
            document.getElementById('d-price').innerText = "₹" + currentItem.price;
            document.getElementById('d-desc').innerText = currentItem.desc;
            document.getElementById('detail-view').classList.add('active');
        }
        function closeDetail() { document.getElementById('detail-view').classList.remove('active'); }

        // Cart
        function addToCart() { cart.push(currentItem); updateBadge(); alert("Added"); closeDetail(); }
        function buyNow() { cart.push(currentItem); updateBadge(); closeDetail(); openCart(); }
        function openCart() { document.getElementById('cart-view').classList.add('active'); renderCart(); }
        function closeCart() { document.getElementById('cart-view').classList.remove('active'); }
        function updateBadge() { document.getElementById('badge').innerText = cart.length; }
        
        function renderCart() {
            let div = document.getElementById('cart-items');
            div.innerHTML = "";
            if(cart.length===0) div.innerHTML = "Cart Empty";
            cart.forEach(i => {
                div.innerHTML += `<div style="border-bottom:1px solid #eee; padding:5px;">${i.name} - <b>₹${i.price}</b></div>`;
            });
        }

        // Checkout
        function placeOrder() {
            let addr = document.getElementById('addr').value;
            let pay = document.querySelector('input[name="pay"]:checked').value;
            if(!addr) return alert("Enter Address");
            if(cart.length===0) return;

            let total = cart.reduce((a,b)=>a+b.price, 0);
            let items = cart.map(i=>i.name).join(", ");
            
            // Save
            let order = { id: Date.now(), date: new Date().toLocaleDateString(), items, total, status: "Placed" };
            let hist = JSON.parse(localStorage.getItem('n_orders')) || [];
            hist.unshift(order);
            localStorage.setItem('n_orders', JSON.stringify(hist));

            // WhatsApp
            let msg = `*ORDER* %0AName: ${user.name}%0APhone: ${user.phone}%0AAddress: ${addr}%0AItems: ${items}%0APayment: ${pay}%0ATotal: ₹${total}`;
            window.open(`https://wa.me/919708797335?text=${msg}`);

            cart = [];
            updateBadge();
            closeCart();
            showTab('account');
            loadOrders();
        }

        // Nav & Pages
        function showTab(tab) {
            document.getElementById('account-view').classList.remove('active');
            if(tab==='account') {
                document.getElementById('account-view').classList.add('active');
                loadOrders();
            }
        }

        function loadOrders() {
            let hist = JSON.parse(localStorage.getItem('n_orders')) || [];
            let div = document.getElementById('order-list');
            div.innerHTML = "";
            hist.forEach(o => {
                div.innerHTML += `
                    <div style="background:#f9f9f9; padding:10px; margin:10px 0; border-left:3px solid green;">
                        <div style="font-size:12px; color:#555;">${o.date}</div>
                        <div><b>${o.items}</b></div>
                        <div>₹${o.total}</div>
                    </div>
                `;
            });
        }
    </script>
</body>
</html>
