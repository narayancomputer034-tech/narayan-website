<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Narayan Plus Store</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- THEME COLORS --- */
        :root { --primary: #2874f0; --secondary: #f43397; /* Meesho Pink */ --bg: #f5f7f9; --dark: #172337; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Roboto, sans-serif; }
        body { background: var(--bg); padding-bottom: 70px; }

        /* --- LOGIN SCREEN --- */
        #login-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .inp { width: 85%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 5px; outline:none; }
        .btn { padding: 12px 40px; background: var(--primary); color: white; border: none; font-weight: bold; cursor: pointer; border-radius: 5px; font-size: 16px; }

        /* --- HEADER & SLIDER --- */
        header { background: var(--primary); padding: 15px; position: sticky; top: 0; z-index: 1000; display: flex; align-items: center; box-shadow: 0 1px 5px rgba(0,0,0,0.1); }
        .logo { color: white; font-size: 20px; font-weight: bold; flex-grow: 1; font-style: italic; }
        .badge { background: red; color: white; font-size: 10px; padding: 2px 6px; border-radius: 50%; position: relative; top: -10px; left: -5px; }
        
        .slider { width: 100%; height: 160px; overflow: hidden; background: #ddd; }
        .slides { display: flex; height: 100%; transition: 0.5s; }
        .slide { min-width: 100%; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; font-weight: bold; background: linear-gradient(45deg, #11998e, #38ef7d); }

        /* --- PRODUCT GRID --- */
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; padding: 5px; }
        .card { background: white; padding: 10px; border-radius: 5px; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
        .card img { width: 100%; height: 140px; object-fit: contain; }
        .p-name { font-size: 13px; color: #333; height: 36px; overflow: hidden; margin: 5px 0; }
        .p-price { font-weight: bold; font-size: 16px; color: #212121; }
        .add-btn { width: 100%; background: white; border: 1px solid var(--primary); color: var(--primary); padding: 5px; margin-top: 5px; cursor: pointer; font-weight: bold; border-radius: 3px; }

        /* --- ADMIN PANEL (SECRET) --- */
        .admin-float-btn { position: fixed; bottom: 80px; left: 20px; background: #333; color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; cursor: pointer; z-index: 2000; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        
        .upload-box { background: white; padding: 20px; margin: 15px; border-radius: 8px; border: 2px dashed var(--secondary); }
        .lbl { display: block; margin-top: 10px; font-weight: bold; font-size: 12px; color: #555; }
        .u-inp { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; background: #f9f9f9; }
        .u-btn { width: 100%; background: var(--secondary); color: white; padding: 15px; border: none; font-weight: bold; border-radius: 5px; margin-top: 15px; }

        .stat-card { background: #e3f2fd; padding: 15px; border-radius: 5px; text-align: center; margin: 10px; border: 1px solid #90caf9; }

        /* --- QR CODE --- */
        .qr-container { text-align: center; padding: 20px; background: white; margin-top: 10px; border: 1px solid #ddd; display: none; }
        .qr-img { width: 180px; height: 180px; }

        /* --- PAGES --- */
        .page { display: none; padding-top: 10px; }
        .page.active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from{opacity:0} to{opacity:1} }

        /* --- NAV BAR --- */
        .nav { position: fixed; bottom: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 10px; border-top: 1px solid #ddd; z-index: 1500; }
        .nav-item { text-align: center; font-size: 10px; color: #666; cursor: pointer; }
        .nav-item i { font-size: 20px; display: block; margin-bottom: 2px; }
        .nav-item.active { color: var(--primary); }
    </style>
</head>
<body>

    <div id="login-overlay">
        <h2 style="color:var(--primary);">Narayan<span style="color:#ffe500">Plus</span></h2>
        <p style="color:#666; margin-bottom:20px;">Customer Login</p>
        <div id="s1" style="width:100%; text-align:center;">
            <input id="ph" class="inp" type="tel" placeholder="Mobile Number">
            <button class="btn" onclick="getOTP()">Get OTP</button>
        </div>
        <div id="s2" style="display:none; width:100%; text-align:center;">
            <input id="otp" class="inp" type="number" placeholder="Enter OTP (1234)">
            <button class="btn" onclick="verifyOTP()">Verify</button>
        </div>
    </div>

    <div id="app" style="display:none;">
        <header>
            <div class="logo">Narayan<span style="color:#ffe500">Plus</span></div>
            <div onclick="openPage('cart')"><i class="fas fa-shopping-cart" style="color:white; font-size:22px;"></i><span class="badge" id="badge">0</span></div>
        </header>

        <div class="admin-float-btn" onclick="openAdminPanel()"><i class="fas fa-user-shield"></i></div>

        <div id="home" class="page active">
            <div class="slider">
                <div class="slides" id="slides">
                    <div class="slide" style="background:#2874f0;">BIG SALE</div>
                    <div class="slide" style="background:#fb641b;">NEW ARRIVALS</div>
                    <div class="slide" style="background:#26a541;">BEST PRICE</div>
                </div>
            </div>

            <h3 style="padding:10px 15px; color:#444;">Latest Collection</h3>
            <div class="grid" id="prod-list"></div>

            <div style="background:var(--dark); color:white; padding:20px; margin-top:20px; text-align:center;">
                <p>Near DAV School, Runnisaidpur</p>
                <button onclick="window.open('https://wa.me/919708797335?text=I_Want_To_Do_Business')" style="background:var(--secondary); color:white; border:none; padding:10px 20px; margin-top:10px; border-radius:30px; font-weight:bold; cursor:pointer;">
                    <i class="fas fa-handshake"></i> Business With Us
                </button>
                <div style="margin-top:15px; font-size:12px;">&copy; 2026 Narayan Services</div>
            </div>
        </div>

        <div id="admin" class="page">
            <div style="padding:15px; background:white; border-bottom:1px solid #ddd;">
                <h3><i class="fas fa-tachometer-alt"></i> Supplier Dashboard</h3>
            </div>

            <div class="stat-card">
                <div style="font-size:30px; font-weight:bold; color:var(--primary);" id="visit-count">0</div>
                <div style="font-size:12px; color:#555;">Total Visitors Today</div>
            </div>

            <div class="upload-box">
                <h3 style="color:var(--secondary);"><i class="fas fa-camera"></i> Add New Product</h3>
                <p style="font-size:11px; color:#666;">Fill details to create listing instantly.</p>
                
                <label class="lbl">Image Link (Photo URL)</label>
                <input id="u-img" class="u-inp" placeholder="Paste image link...">
                
                <label class="lbl">Product Name</label>
                <input id="u-name" class="u-inp" placeholder="e.g. Smart Watch">
                
                <label class="lbl">Price (₹)</label>
                <input id="u-price" type="number" class="u-inp" placeholder="e.g. 1500">
                
                <label class="lbl">Category (Menu)</label>
                <select id="u-cat" class="u-inp">
                    <option>Mobile</option>
                    <option>Laptop</option>
                    <option>Audio</option>
                    <option>Accessories</option>
                    <option>Clothing</option>
                </select>

                <button class="u-btn" onclick="uploadProduct()">UPLOAD LIVE</button>
            </div>

            <div style="padding:15px;">
                <h4>Generated Code (For GitHub)</h4>
                <textarea id="code-box" style="width:100%; height:80px; padding:10px; border:1px solid #333; color:green; font-family:monospace; margin-top:5px;"></textarea>
                <p style="font-size:10px; color:red;">*To make it permanent for everyone, copy this code and update 'defaultProducts' list.</p>
            </div>
        </div>

        <div id="cart" class="page">
            <h3 style="padding:15px;">Shopping Cart</h3>
            <div id="cart-items" style="padding:15px;"></div>
            
            <div style="padding:15px; background:white; margin-top:10px;">
                <input id="addr" class="u-inp" placeholder="Full Address with PIN Code">
                
                <p style="margin:10px 0; font-weight:bold;">Payment Mode:</p>
                <div style="display:flex; gap:10px;">
                    <button class="add-btn" style="background:#eee;" onclick="setPay('COD')">Cash on Delivery</button>
                    <button class="add-btn" style="background:#eee;" onclick="setPay('UPI')">UPI / QR Code</button>
                </div>

                <div id="qr-box" class="qr-container">
                    <p style="font-weight:bold;">Scan to Pay: Narayan Services</p>
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=upi://pay?pa=9708797335@paytm&pn=NarayanServices" class="qr-img">
                    <p style="font-size:11px; color:red;">Scan with PhonePe/Paytm/GPay</p>
                </div>

                <button class="u-btn" onclick="placeOrder()">CONFIRM ORDER</button>
            </div>
        </div>
        
        <div class="nav">
            <div class="nav-item active" onclick="openPage('home')"><i class="fas fa-home"></i>Home</div>
            <div class="nav-item" onclick="openAdminPanel()"><i class="fas fa-plus-circle"></i>Sell</div>
            <div class="nav-item" onclick="openPage('cart')"><i class="fas fa-shopping-cart"></i>Cart</div>
        </div>
    </div>

    <script>
        // --- DATA & SETUP ---
        // 1. Permanent Products (Jo GitHub code me hain)
        const defaultProducts = [
            {id:1, name:"HP 15s Laptop", price:35990, img:"https://m.media-amazon.com/images/I/71ItMeqpnzL._AC_UY327_FMwebp_QL65_.jpg"},
            {id:2, name:"Samsung Galaxy M14", price:12490, img:"https://m.media-amazon.com/images/I/817WWpaQqbL._AC_UY327_FMwebp_QL65_.jpg"},
            {id:3, name:"Canon Printer", price:5999, img:"https://m.media-amazon.com/images/I/51+u0a+JpQL._AC_UY327_FMwebp_QL65_.jpg"}
        ];

        // 2. Temp Products (Jo aap Upload button se dalenge)
        let myUploads = JSON.parse(localStorage.getItem('my_uploads')) || [];
        let allProducts = [...myUploads, ...defaultProducts];
        
        let cart = [];
        let payMode = "COD";
        
        // 3. Visitor Counter
        let visits = localStorage.getItem('visits') || 100;
        visits++;
        localStorage.setItem('visits', visits);
        document.getElementById('visit-count').innerText = visits;

        // --- LOGIN ---
        function getOTP() { 
            if(document.getElementById('ph').value.length<10) alert("Invalid No");
            else { document.getElementById('s1').style.display='none'; document.getElementById('s2').style.display='block'; alert("OTP: 1234"); }
        }
        function verifyOTP() {
            if(document.getElementById('otp').value=="1234") {
                document.getElementById('login-overlay').style.display='none';
                document.getElementById('app').style.display='block';
                render();
            } else alert("Wrong OTP");
        }

        // --- ADMIN PANEL & UPLOAD ---
        function openAdminPanel() {
            let pin = prompt("Enter Admin PIN (Secret):");
            if(pin === "1234") openPage('admin');
            else alert("Wrong PIN! Only Admin can access.");
        }

        function uploadProduct() {
            let img = document.getElementById('u-img').value;
            let name = document.getElementById('u-name').value;
            let price = document.getElementById('u-price').value;
            let cat = document.getElementById('u-cat').value;

            if(!img || !name || !price) return alert("Fill all details");

            let newP = { id: Date.now(), name: name, price: price, img: img, cat: cat };
            
            // Save to LocalStorage (Phone memory)
            myUploads.unshift(newP);
            localStorage.setItem('my_uploads', JSON.stringify(myUploads));
            
            // Show Code for permanent save
            let code = `{id:${newP.id}, name:"${name}", price:${price}, img:"${img}"},`;
            document.getElementById('code-box').value = code;
            
            // Refresh
            allProducts = [...myUploads, ...defaultProducts];
            render();
            alert("Product Live! (Check Home Page)");
            document.getElementById('u-name').value = ""; // clear
        }

        // --- APP LOGIC ---
        function render() {
            let html = "";
            allProducts.forEach(p => {
                html += `
                    <div class="card">
                        <img src="${p.img}">
                        <div class="p-name">${p.name}</div>
                        <div class="p-price">₹${p.price}</div>
                        <button class="add-btn" onclick="add(${p.id})">ADD TO CART</button>
                    </div>`;
            });
            document.getElementById('prod-list').innerHTML = html;
        }

        function add(id) {
            let p = allProducts.find(x => x.id === id);
            cart.push(p);
            document.getElementById('badge').innerText = cart.length;
            alert("Added!");
        }

        function setPay(m) {
            payMode = m;
            document.getElementById('qr-box').style.display = (m==='UPI') ? 'block' : 'none';
        }

        function placeOrder() {
            let addr = document.getElementById('addr').value;
            if(!addr) return alert("Enter Address");
            if(cart.length===0) return alert("Cart Empty");
            
            let items = cart.map(i=>i.name).join(", ");
            let total = cart.reduce((a,b)=>a+parseInt(b.price),0);
            
            let url = `https://wa.me/919708797335?text=*NEW ORDER*%0AItems: ${items}%0ATotal: ₹${total}%0AAddress: ${addr}%0APay Mode: ${payMode}`;
            window.open(url);
            
            cart=[]; render(); openPage('home');
        }

        function openPage(id) {
            document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(id==='cart') {
                let h=""; let t=0;
                cart.forEach(i=>{ t+=parseInt(i.price); h+=`<div>${i.name} - ₹${i.price}</div>`; });
                document.getElementById('cart-items').innerHTML = h + `<hr><b>Total: ₹${t}</b>`;
            }
        }

        // Auto Slider
        let s=0; setInterval(()=>{ s=(s>2)?0:s+1; document.getElementById('slides').style.transform=`translateX(-${s*100}%)`; }, 3000);
    </script>
</body>
</html>
